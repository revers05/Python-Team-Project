import sqlite3
import tkinter
import tkinter.messagebox



# Connect to the database
conn = sqlite3.connect('../week 13 programs/students.db')

# Create a table to store student information
conn.execute('''CREATE TABLE IF NOT EXISTS students (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    first_name TEXT NOT NULL,
                    last_name TEXT NOT NULL,
                    age INTEGER NOT NULL,
                    gender TEXT NOT NULL,
                    address TEXT NOT NULL,
                    email TEXT NOT NULL,
                    phone_number TEXT NOT NULL
                );''')

# Insert some sample data into the table
conn.execute('''INSERT INTO students (first_name, last_name, age, gender, address, email, phone_number)
                VALUES ('John', 'Doe', 18, 'Male', '123 Main St', 'johndoe@example.com', '555-1234'),
                       ('Jane', 'Smith', 19, 'Female', '456 Oak St', 'janesmith@example.com', '555-5678'),
                       ('Bob', 'Johnson', 20, 'Male', '789 Pine St', 'bobjohnson@example.com', '555-9012'),
                       ('Sally', 'Jones', 21, 'Female', '234 Maple St', 'sallyjones@example.com', '555-3456'),
                       ('Mike', 'Brown', 22, 'Male', '567 Elm St', 'mikebrown@example.com', '555-7890'),
                       ('Mary', 'Davis', 23, 'Female', '890 Cedar St', 'marydavis@example.com', '555-2345'),
                       ('Tom', 'Wilson', 24, 'Male', '111 Birch St', 'tomwilson@example.com', '555-6789'),
                       ('Emily', 'Lee', 25, 'Female', '222 Pine St', 'emilylee@example.com', '555-0123'),
                       ('Chris', 'Clark', 26, 'Male', '333 Oak St', 'chrisclark@example.com', '555-4567'),
                       ('Linda', 'Smith', 27, 'Female', '444 Elm St', 'lindasmith@example.com', '555-8901')
                ;''')

# Commit the changes to the database
conn.commit()

# Query the table and print the results
cursor = conn.execute('SELECT * FROM students')
for row in cursor:
    print(row)

class OurGUI:
    def __init__(self):
    # Create the window and set the frames
        self.main_window = tkinter.Tk()
        self.main_window.title("Student Database Editor")
        self.top_frame = tkinter.Frame(self.main_window)
        self.mid_frame = tkinter.Frame(self.main_window)
        self.low_frame = tkinter.Frame(self.main_window)
        self.bottom_frame = tkinter.Frame(self.main_window)
    # Create the ID Selection Box
        self.prompt_label = tkinter.Label(self.top_frame,
                                          text="Enter the ID of the record you want to edit: ")
        self.id_selection = tkinter.Entry(self.top_frame,
                                       width=20)
        self.prompt_label.pack(side='left')
        self.id_selection.pack(side='left')
    # Create the Field Selection Box
        self.prompt_label = tkinter.Label(self.mid_frame,
                                         text="Enter the field you want to edit: first_name, last_name, age, gender, address, email, or phone_number")
        self.field = tkinter.Entry(self.mid_frame,
                                          width=20)
        self.prompt_label.pack(side='left')
        self.field.pack(side='left')
    # Create the New Value Box
        self.prompt_label = tkinter.Label(self.low_frame,
                                          text="Enter the new value:")
        self.new_value = tkinter.Entry(self.low_frame,
                                       width=20)
        self.prompt_label.pack(side='left')
        self.new_value.pack(side='left')
    # Create the Update and Exit Buttons
        self.dis_button = tkinter.Button(self.bottom_frame,
                                         text='Update Data',
                                         command=self.finish_f)
        self.quit_button = tkinter.Button(self.bottom_frame,
                                          text='Exit',
                                          command=self.main_window.destroy)
        self.dis_button.pack(side='left')
        self.quit_button.pack(side='left')
    # Finish Up the GUI
        self.top_frame.pack()
        self.mid_frame.pack()
        self.low_frame.pack()
        self.bottom_frame.pack()
        tkinter.mainloop()
    # Function that will update the database
    def finish_f(self):
        field_name = (self.field.get())
        new_values = (self.new_value.get())
        record_id = (self.id_selection.get())
        # Update the record in the database
        conn.execute(f"UPDATE students SET {field_name} = ? WHERE id = ?", (new_values, record_id))


OurGUI()

# Commit the changes to the database
conn.commit()

# Query the table and print the results
cursor = conn.execute('SELECT * FROM students')
print("")
print("Updated Information")
print("-------------------")
for row in cursor:
    (print(row))

# Close the connection to the database
conn.close()
